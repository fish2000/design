!function(a){a.fn.extend({smoothZoom:function(b){function d(){if("true"==b.showCaption){var c=a("#lightzoomed").attr("alt");c?a(".sz-caption").html("<span>"+c+"</span>").fadeIn():a(".sz-caption").empty()}}function e(){var c=a("#lightzoomed").offset(),d=a("#lightzoomed").width(),e=a("#lightzoomed").height(),f=a(window).scrollTop();a(".sz-overlay, .sz-left, .sz-right").fadeOut(),a(".sz-zoomed").animate({width:d,height:e,top:c.top-f,left:c.left},b.zoomoutSpeed,b.zoomoutEasing,function(){a(".sz-zoomed, .sz-overlay, .sz-right, .sz-left, .sz-caption, .sz-close").remove(),a("#lightzoomed").removeAttr("id")})}function f(){var b=a("#lightzoomed").data("smoothzoom"),c=a("#lightzoomed").index("[data-smoothzoom="+b+"]"),e=a("img[data-smoothzoom="+b+"]").length,f=c+1;f>=e?a(".sz-zoomed").animate({width:"80%",height:"80%",top:"10%",left:"10%"},200,function(){a(".sz-zoomed").animate({width:"90%",height:"90%",top:"5%",left:"5%"},200)}):(a("#lightzoomed").removeAttr("id"),a(".sz-caption").fadeOut(),a(".sz-zoomed").animate({width:"80%",height:"80%",top:"10%",left:"10%",opacity:"0"},function(){a("[data-smoothzoom="+b+"]:eq("+f+")").attr("id","lightzoomed");var c=a("#lightzoomed").parent().attr("href");a(".sz-zoomed").css({background:"url("+c+")",width:"80%",height:"80%",top:"10%",left:"10%",opacity:"0"}),a("<img/>").attr("src",c).load(function(){a(this).remove(),a(".sz-zoomed").animate({width:"90%",height:"90%",top:"5%",left:"5%",opacity:"1"})}),d()}))}function g(){var b=a("#lightzoomed").data("smoothzoom"),c=a("#lightzoomed").index("[data-smoothzoom="+b+"]"),f=(a("img[data-smoothzoom="+b+"]").length,c-1);-1>=f?a(".sz-zoomed").animate({width:"80%",height:"80%",top:"10%",left:"10%"},200,function(){a(".sz-zoomed").animate({width:"90%",height:"90%",top:"5%",left:"5%"},200)}):(a("#lightzoomed").removeAttr("id"),a(".sz-caption").fadeOut(),a(".sz-zoomed").animate({width:"80%",height:"80%",top:"10%",left:"10%",opacity:"0"},function(){a("[data-smoothzoom="+b+"]:eq("+f+")").attr("id","lightzoomed");var c=a("#lightzoomed").parent().attr("href");a(".sz-zoomed").css({background:"url("+c+")",width:"80%",height:"80%",top:"10%",left:"10%",opacity:"0"}),a("<img/>").attr("src",c).load(function(){a(this).remove(),a(".sz-zoomed").animate({width:"90%",height:"90%",top:"5%",left:"5%",opacity:"1"})}),d()}))}var c={zoominSpeed:800,zoomoutSpeed:400,zoominEasing:"easeOutExpo",zoomoutEasing:"easeOutExpo",navigationButtons:"true",closeButton:"false",showCaption:"true"},b=a.extend(c,b);a("img[data-smoothzoom]").click(function(c){var f=(a(this).attr("src"),a(this).parent().attr("href")),h=(a(this).parent().attr("target"),a(this).offset()),i=a(this).width(),j=a(this).height(),k=a(window).scrollTop();a(window).width(),a(window).height(),a(this).attr("id","lightzoomed"),a("body").append("<div class='sz-overlay'></div><a href='#' class='sz-zoomed' style='background:url("+f+")'>&nbsp;</a><div class='sz-ui'></div>");var n=a("#lightzoomed").data("smoothzoom"),o=a("img[data-smoothzoom="+n+"]").length;"true"==b.navigationButtons&&o>1&&a("body").append("<a href='#' class='sz-left'>&#9664;</a><a href='#' class='sz-right'>&#9654;</a>"),"true"==b.closeButton&&a("body").append("<a href='#' class='sz-close'>&#10006;</a>"),"true"==b.showCaption&&(a("body").append("<div class='sz-caption'></div>"),d()),a(".sz-overlay, .sz-left, .sz-right").fadeIn(),a(".sz-zoomed").css({width:i,height:j,top:h.top-k,left:h.left}),a(".sz-zoomed").animate({width:"90%",height:"90%",top:"5%",left:"5%"},b.zoominSpeed,b.zoominEasing),c.preventDefault()}),a(document.body).on("click",".sz-zoomed, .sz-close",function(a){e(),a.preventDefault()}),a(document.body).on("click",".sz-right",function(a){f(),a.preventDefault()}),a(document.body).on("click",".sz-left",function(a){g(),a.preventDefault()}),a(document).keydown(function(b){switch(b.which){case 37:a(".sz-overlay").length&&g();break;case 39:a(".sz-overlay").length&&f();break;case 27:e();break;case 40:e();break;default:return}b.preventDefault()})}})}(jQuery);